import{getSmithyContext as e,normalizeProvider as t,resolveAwsSdkSigV4Config as r,EndpointCache as o,customEndpointFunctions as n,awsEndpointFunctions as s,resolveEndpoint as i,fromBase64 as a,toBase64 as c,AwsSdkSigV4Signer as d,NoAuthSigner as p,NoOpLogger as u,parseUrl as l,fromUtf8 as h,toUtf8 as m,emitWarningIfUnsupportedVersion as y,emitWarningIfUnsupportedVersion$1 as f,calculateBodyLength as g,createDefaultUserAgentProvider as x,loadConfig as w,NODE_MAX_ATTEMPT_CONFIG_OPTIONS as b,NODE_REGION_CONFIG_FILE_OPTIONS as S,NODE_REGION_CONFIG_OPTIONS as E,NodeHttpHandler as v,NODE_RETRY_MODE_CONFIG_OPTIONS as P,DEFAULT_RETRY_MODE as I,Hash as k,streamCollector as _,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS as O,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS as C,NODE_APP_ID_CONFIG_OPTIONS as A,resolveDefaultsModeConfig as $,loadConfigsForDefaultMode as D,getDefaultExtensionConfiguration as z,getHttpHandlerExtensionConfiguration as j,resolveAwsRegionExtensionConfiguration as T,resolveDefaultRuntimeConfig as R,resolveHttpHandlerRuntimeConfig as U,getAwsRegionExtensionConfiguration as q,Client as F,resolveUserAgentConfig as G,resolveRetryConfig as H,resolveRegionConfig as M,resolveEndpointConfig as V,getUserAgentPlugin as B,getRetryPlugin as L,getContentLengthPlugin as N,getHostHeaderPlugin as J,getLoggerPlugin as W,getRecursionDetectionPlugin as K,getHttpAuthSchemeEndpointRuleSetPlugin as Q,DefaultIdentityProviderConfig as X,getHttpSigningPlugin as Y,resolveHostHeaderConfig as Z,ServiceException as ee,SENSITIVE_STRING as te,requestBuilder as re,take as oe,_json as ne,map as se,expectNonNull as ie,expectObject as ae,parseJsonBody as ce,expectString as de,expectInt32 as pe,parseJsonErrorBody as ue,loadRestJsonErrorCode as le,withBaseException as he,decorateServiceException as me,Command as ye,getSerdePlugin as fe,getEndpointPlugin as ge,createAggregatedClient as xe}from"./core.min.mjs";export{Command as $Command,Client as __Client}from"./core.min.mjs";import"buffer";import"stream";import"http";import"https";import"http2";import"os";import"path";import"crypto";import"fs";import{packageInfo as we}from"./package.min.mjs";import"zlib";import"process";const be=async(r,o,n)=>({operation:e(o).operation,region:await t(r.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});const Se=e=>{const t=[];if("CreateToken"===e.operation)t.push({schemeId:"smithy.api#noAuth"});else t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e));return t},Ee={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},ve="required",Pe="fn",Ie="argv",ke="ref",_e=!0,Oe="isSet",Ce="booleanEquals",Ae="error",$e="endpoint",De="tree",ze="PartitionResult",je="getAttr",Te={[ve]:!1,type:"String"},Re={[ve]:!0,default:!1,type:"Boolean"},Ue={[ke]:"Endpoint"},qe={[Pe]:Ce,[Ie]:[{[ke]:"UseFIPS"},!0]},Fe={[Pe]:Ce,[Ie]:[{[ke]:"UseDualStack"},!0]},Ge={},He={[Pe]:je,[Ie]:[{[ke]:ze},"supportsFIPS"]},Me={[ke]:ze},Ve={[Pe]:Ce,[Ie]:[!0,{[Pe]:je,[Ie]:[Me,"supportsDualStack"]}]},Be=[qe],Le=[Fe],Ne=[{[ke]:"Region"}],Je={version:"1.0",parameters:{Region:Te,UseDualStack:Re,UseFIPS:Re,Endpoint:Te},rules:[{conditions:[{[Pe]:Oe,[Ie]:[Ue]}],rules:[{conditions:Be,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ae},{conditions:Le,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ae},{endpoint:{url:Ue,properties:Ge,headers:Ge},type:$e}],type:De},{conditions:[{[Pe]:Oe,[Ie]:Ne}],rules:[{conditions:[{[Pe]:"aws.partition",[Ie]:Ne,assign:ze}],rules:[{conditions:[qe,Fe],rules:[{conditions:[{[Pe]:Ce,[Ie]:[_e,He]},Ve],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ge,headers:Ge},type:$e}],type:De},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ae}],type:De},{conditions:Be,rules:[{conditions:[{[Pe]:Ce,[Ie]:[He,_e]}],rules:[{conditions:[{[Pe]:"stringEquals",[Ie]:[{[Pe]:je,[Ie]:[Me,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Ge,headers:Ge},type:$e},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ge,headers:Ge},type:$e}],type:De},{error:"FIPS is enabled but this partition does not support FIPS",type:Ae}],type:De},{conditions:Le,rules:[{conditions:[Ve],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ge,headers:Ge},type:$e}],type:De},{error:"DualStack is enabled but this partition does not support DualStack",type:Ae}],type:De},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Ge,headers:Ge},type:$e}],type:De}],type:De},{error:"Invalid Configuration: Missing Region",type:Ae}]},We=new o({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ke=(e,t={})=>We.get(e,(()=>i(Je,{endpointParams:e,logger:t.logger})));n.aws=s;const Qe=e=>{y(process.version);const t=$(e),r=()=>t().then(D),o=(e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??a,base64Encoder:e?.base64Encoder??c,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ke,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Se,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new d},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new p}],logger:e?.logger??new u,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??l,utf8Decoder:e?.utf8Decoder??h,utf8Encoder:e?.utf8Encoder??m}))(e);f(process.version);const n={profile:e?.profile};return{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??g,defaultUserAgentProvider:e?.defaultUserAgentProvider??x({serviceId:o.serviceId,clientVersion:we.version}),maxAttempts:e?.maxAttempts??w(b,e),region:e?.region??w(E,{...S,...n}),requestHandler:v.create(e?.requestHandler??r),retryMode:e?.retryMode??w({...P,default:async()=>(await r()).retryMode||I},e),sha256:e?.sha256??k.bind(null,"sha256"),streamCollector:e?.streamCollector??_,useDualstackEndpoint:e?.useDualstackEndpoint??w(O,n),useFipsEndpoint:e?.useFipsEndpoint??w(C,n),userAgentAppId:e?.userAgentAppId??w(A,n)}},Xe=e=>{const t=e.httpAuthSchemes;let r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(e){const r=t.findIndex((t=>t.schemeId===e.schemeId));-1===r?t.push(e):t.splice(r,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){r=e},httpAuthSchemeProvider:()=>r,setCredentials(e){o=e},credentials:()=>o}};class Ye extends F{config;constructor(...[e]){const t=Qe(e||{}),o=(n=t,{...n,useDualstackEndpoint:n.useDualstackEndpoint??!1,useFipsEndpoint:n.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"});var n;const s=G(o),i=H(s),a=M(i),c=Z(a),d=V(c);const p=((e,t)=>{const r={...q(e),...z(e),...j(e),...Xe(e)};return t.forEach((e=>e.configure(r))),{...e,...T(r),...R(r),...U(r),...(o=r,{httpAuthSchemes:o.httpAuthSchemes(),httpAuthSchemeProvider:o.httpAuthSchemeProvider(),credentials:o.credentials()})};var o})({...r(d)},e?.extensions||[]);super(p),this.config=p,this.middlewareStack.use(B(this.config)),this.middlewareStack.use(L(this.config)),this.middlewareStack.use(N(this.config)),this.middlewareStack.use(J(this.config)),this.middlewareStack.use(W(this.config)),this.middlewareStack.use(K(this.config)),this.middlewareStack.use(Q(this.config,{httpAuthSchemeParametersProvider:be,identityProviderConfigProvider:async e=>new X({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(Y(this.config))}destroy(){super.destroy()}}class Ze extends ee{constructor(e){super(e),Object.setPrototypeOf(this,Ze.prototype)}}class et extends Ze{name="AccessDeniedException";$fault="client";error;error_description;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,et.prototype),this.error=e.error,this.error_description=e.error_description}}class tt extends Ze{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),Object.setPrototypeOf(this,tt.prototype),this.error=e.error,this.error_description=e.error_description}}const rt=e=>({...e,...e.clientSecret&&{clientSecret:te},...e.refreshToken&&{refreshToken:te},...e.codeVerifier&&{codeVerifier:te}}),ot=e=>({...e,...e.accessToken&&{accessToken:te},...e.refreshToken&&{refreshToken:te},...e.idToken&&{idToken:te}});class nt extends Ze{name="ExpiredTokenException";$fault="client";error;error_description;constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,nt.prototype),this.error=e.error,this.error_description=e.error_description}}class st extends Ze{name="InternalServerException";$fault="server";error;error_description;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,st.prototype),this.error=e.error,this.error_description=e.error_description}}class it extends Ze{name="InvalidClientException";$fault="client";error;error_description;constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),Object.setPrototypeOf(this,it.prototype),this.error=e.error,this.error_description=e.error_description}}class at extends Ze{name="InvalidGrantException";$fault="client";error;error_description;constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),Object.setPrototypeOf(this,at.prototype),this.error=e.error,this.error_description=e.error_description}}class ct extends Ze{name="InvalidRequestException";$fault="client";error;error_description;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,ct.prototype),this.error=e.error,this.error_description=e.error_description}}class dt extends Ze{name="InvalidScopeException";$fault="client";error;error_description;constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),Object.setPrototypeOf(this,dt.prototype),this.error=e.error,this.error_description=e.error_description}}class pt extends Ze{name="SlowDownException";$fault="client";error;error_description;constructor(e){super({name:"SlowDownException",$fault:"client",...e}),Object.setPrototypeOf(this,pt.prototype),this.error=e.error,this.error_description=e.error_description}}class ut extends Ze{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),Object.setPrototypeOf(this,ut.prototype),this.error=e.error,this.error_description=e.error_description}}class lt extends Ze{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,lt.prototype),this.error=e.error,this.error_description=e.error_description}}const ht=async(e,t)=>{const r=re(e,t);let o;return r.bp("/token"),o=JSON.stringify(oe(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:e=>ne(e)})),r.m("POST").h({"content-type":"application/json"}).b(o),r.build()},mt=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return yt(e,t);const r=se({$metadata:Ot(e)}),o=ie(ae(await ce(e.body,t)),"body"),n=oe(o,{accessToken:de,expiresIn:pe,idToken:de,refreshToken:de,tokenType:de});return Object.assign(r,n),r},yt=async(e,t)=>{const r={...e,body:await ue(e.body,t)},o=le(e,r.body);switch(o){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await gt(r);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await xt(r);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await wt(r);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await bt(r);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await St(r);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await Et(r);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await vt(r);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Pt(r);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await It(r);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await kt(r);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await _t(r);default:const t=r.body;return ft({output:e,parsedBody:t,errorCode:o})}},ft=he(Ze),gt=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new et({$metadata:Ot(e),...r});return me(s,e.body)},xt=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new tt({$metadata:Ot(e),...r});return me(s,e.body)},wt=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new nt({$metadata:Ot(e),...r});return me(s,e.body)},bt=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new st({$metadata:Ot(e),...r});return me(s,e.body)},St=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new it({$metadata:Ot(e),...r});return me(s,e.body)},Et=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new at({$metadata:Ot(e),...r});return me(s,e.body)},vt=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new ct({$metadata:Ot(e),...r});return me(s,e.body)},Pt=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new dt({$metadata:Ot(e),...r});return me(s,e.body)},It=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new pt({$metadata:Ot(e),...r});return me(s,e.body)},kt=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new ut({$metadata:Ot(e),...r});return me(s,e.body)},_t=async(e,t)=>{const r=se({}),o=e.body,n=oe(o,{error:de,error_description:de});Object.assign(r,n);const s=new lt({$metadata:Ot(e),...r});return me(s,e.body)},Ot=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});class Ct extends(ye.classBuilder().ep(Ee).m((function(e,t,r,o){return[fe(r,this.serialize,this.deserialize),ge(r,e.getEndpointParameterInstructions())]})).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(rt,ot).ser(ht).de(mt).build()){}const At={CreateTokenCommand:Ct};class $t extends Ye{}xe(At,$t);export{et as AccessDeniedException,tt as AuthorizationPendingException,Ct as CreateTokenCommand,rt as CreateTokenRequestFilterSensitiveLog,ot as CreateTokenResponseFilterSensitiveLog,nt as ExpiredTokenException,st as InternalServerException,it as InvalidClientException,at as InvalidGrantException,ct as InvalidRequestException,dt as InvalidScopeException,$t as SSOOIDC,Ye as SSOOIDCClient,Ze as SSOOIDCServiceException,pt as SlowDownException,ut as UnauthorizedClientException,lt as UnsupportedGrantTypeException};
//# sourceMappingURL=index.min7.mjs.map
